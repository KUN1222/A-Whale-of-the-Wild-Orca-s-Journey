<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Whale of the Wild - Family Tree</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ä¸¥æ ¼éµå®ˆè®¾è®¡è§„èŒƒï¼šæ·±è‰²èƒŒæ™¯ï¼Œæµ…è‰²æ–‡å­— */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        :root {
            --bg-dark: #0a192f;
            --bg-node: #112240;
            --border-line: #233554;
            --text-light: #ccd6f6;
            --text-medium: #8892b0;
            --text-accent: #64ffda;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 2rem;
        }
        .tree-wrapper {
            display: flex;
            justify-content: center;
            overflow-x: auto;
            padding: 2rem 0;
        }
        .tree ul, .tree li {
            position: relative;
            margin: 0;
            padding: 0;
            list-style-type: none;
        }
        .tree ul {
            display: flex;
            /* å¢åŠ ä»£é™…é—´è· */
            padding-top: 70px; 
        }
        .tree li {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 10px;
        }
        .node {
            padding: 12px 24px;
            background-color: var(--bg-node);
            border: 1px solid var(--border-line);
            border-radius: 6px;
            font-weight: 500;
            text-align: center;
            min-width: 140px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        .node-icon {
            font-size: 1.5rem;
            line-height: 1;
        }
        .node:hover {
            transform: translateY(-3px);
            border-color: var(--text-accent);
        }
        .node.is-vega {
            color: var(--text-accent);
            border-color: var(--text-accent);
            box-shadow: 0 0 15px rgba(100, 255, 218, 0.2);
        }
        .node.is-lost {
            color: var(--text-medium);
            text-decoration: line-through;
            opacity: 0.7;
        }
        /* ä¿®æ­£å¹¶åŠ é•¿è¿æ¥çº¿ */
        .tree li::before {
            content: '';
            position: absolute;
            top: -35px; /* å¢åŠ é•¿åº¦ */
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 35px; /* å¢åŠ é•¿åº¦ */
            background-color: var(--border-line);
        }
        .tree li::after {
            content: '';
            position: absolute;
            top: -35px; /* åŒ¹é…å‚ç›´çº¿ä½ç½® */
            height: 2px;
            background-color: var(--border-line);
            width: 100%;
        }
        .tree > li::before, .tree > li::after { display: none; }
        .tree ul li:only-child::after { display: none; }
        .tree ul li:first-child::after { left: 50%; width: 50%; }
        .tree ul li:last-child::after { left: 0; width: 50%; }
        .relationship-label {
            position: absolute;
            top: -55px; /* è°ƒæ•´ä½ç½®ä»¥é€‚åº”æ›´é•¿çš„çº¿ */
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: var(--text-medium);
            background-color: var(--bg-dark);
            padding: 0 5px;
            white-space: nowrap;
        }
        .section-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-accent);
            margin-top: 4rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-line);
        }
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal-backdrop {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(10, 25, 47, 0.85);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .modal-content {
            background-color: var(--bg-node);
            border: 1px solid var(--text-accent);
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            position: relative;
        }
        .modal-icon {
            font-size: 3rem;
            float: left;
            margin-right: 1rem;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <header class="text-center mb-4">
        <h1 class="text-3xl md:text-5xl font-bold">The Whale of the Wild</h1>
        <p class="text-lg text-cyan-400">æ ¸å¿ƒå®¶æ—å…³ç³»å›¾</p>
    </header>

    <div id="tree-container" class="tree-wrapper">
        <!-- JS ç”Ÿæˆæ—è°± -->
    </div>
    
    <div id="other-kinship-container">
        <h2 class="section-title">åŒæ—å…¶ä»–æˆå‘˜</h2>
        <div class="tree-wrapper">
             <!-- JS ç”Ÿæˆå…¶ä»–æˆå‘˜ -->
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† HTML -->
    <div id="character-modal" class="modal-backdrop">
        <div class="modal-content">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        const characterData = {
            siria: { name: 'Greatmother Siria', icon: 'ğŸ‘µğŸ»', title: 'æ™ºæ…§çš„å¥³æ—é•¿', story: 'å®¶æ—çš„æœ€é«˜é¢†è¢–ä¸é¦–å¸­å¯»è·¯è€…ã€‚å¥¹æ˜¯æ•´ä¸ªé²¸ç¾¤çš„æ™ºæ…§æ ¸å¿ƒä¸å†å²çš„æ´»å­—å…¸ã€‚å¥¹çš„æ•™è¯²ï¼Œå¦‚â€œç¾æ˜¯æ€æƒ³çš„é£Ÿç²®â€ï¼Œåœ¨ç»´åŠ æœ€è¿·èŒ«çš„æ—¶å€™ç»™äºˆäº†å…³é”®æŒ‡å¼•ã€‚' },
            arctura: { name: 'Mother Arctura', icon: 'ğŸ‘©ğŸ»', title: 'æ…ˆçˆ±çš„çŒæ‰‹', story: 'ç»´åŠ å’Œå¾·å†…ä¼¯çš„æ¯äº²ï¼Œä¸€ä½å¼ºå¤§çš„çŒæ‰‹ã€‚å¥¹åœ¨æ‰¿å—ä¸§å¥³ä¹‹ç—›çš„åŒæ—¶ï¼Œä¾ç„¶æ˜¯å­©å­ä»¬å¿ƒä¸­æ¸©æš–å’ŒåŠ›é‡çš„æ¥æºã€‚' },
            nova: { name: 'Aunt Nova', icon: 'ğŸ‘©ğŸ»', title: 'æ”¯æŒçš„å§å¦¹', story: 'é˜¿å…‹å›¾æ‹‰çš„å§å¦¹ï¼Œé˜¿å¥æ‹‰çš„æ¯äº²ã€‚å¥¹åœ¨å®¶æ—ä¸­æ‰®æ¼”ç€é‡è¦çš„æƒ…æ„Ÿæ”¯æŒè§’è‰²ï¼Œä½“ç°äº†æ¯ç³»ç¤¾ä¼šä¸­å§å¦¹é—´çš„ç´§å¯†è”ç³»ã€‚' },
            andromeda: { name: 'Andromeda', icon: 'ğŸ‘§ğŸ»', title: 'å¤±è½çš„äº²äºº', isLost: true, story: 'é˜¿å…‹å›¾æ‹‰å’Œè¯ºå¨ƒæœ€å°çš„å¦¹å¦¹ï¼Œåœ¨å¤šå¹´å‰çš„â€œæ•çŒå­£â€è¢«äººç±»æŠ“èµ°ï¼Œå¥¹çš„å¤±è¸ªæ˜¯å®¶æ—å¿ƒä¸­æ°¸è¿œçš„ç—›ã€‚' },
            rigel: { name: 'Great-uncle Rigel', icon: 'ğŸ‘¨ğŸ»â€ğŸ¦³', title: 'åšå®šçš„å®ˆæŠ¤è€…', story: 'å¸Œè‰äºšçš„å¼Ÿå¼Ÿï¼Œå®¶æ—çš„å®ˆæŠ¤ç¥ã€‚ä»–æ²‰é»˜å¯¡è¨€ä½†è¡ŒåŠ¨å……æ»¡åŠ›é‡ï¼ŒèƒŒä¸Šçš„ä¼¤ç–¤è§è¯äº†ä»–ä¸ºä¿æŠ¤å®¶æ—è€Œæˆ˜çš„è‹±å‹‡è¿‡å»ã€‚' },
            antares: { name: 'Great-uncle Antares', icon: 'ğŸ‘¨ğŸ»â€ğŸ¦³', title: 'è­¦æƒ•çš„å®ˆæŠ¤è€…', story: 'ä¸å‚å®¿ä¸ƒä¸€åŒè¡ŒåŠ¨çš„å®ˆæŠ¤è€…ï¼Œå¾ˆå¯èƒ½æ˜¯å¸Œè‰äºšè€ç¥–æ¯çš„å¦ä¸€ä½å…„å¼Ÿã€‚ä»–åœ¨å®¶æ—éœ€è¦ä¿æŠ¤çš„å…³é”®æ—¶åˆ»æ€»æ˜¯æŒºèº«è€Œå‡ºã€‚' },
            vega: { name: 'Vega', icon: 'ğŸ‘§ğŸ»', title: 'æˆé•¿ä¸­çš„å¯»è·¯è€…', isProtagonist: true, story: 'æ•…äº‹çš„ä¸»è§’ã€‚åœ¨ç»å†å¤±å»å¦¹å¦¹ã€ä¸å®¶æ—å¤±æ•£çš„é‡é‡è€ƒéªŒåï¼Œå¥¹ä»ä¸€ä¸ªå†²åŠ¨ã€è¿·èŒ«çš„å¹´è½»è™é²¸ï¼Œæˆé•¿ä¸ºä¸€åå‹‡æ•¢ã€æœ‰æ‹…å½“çš„çœŸæ­£é¢†è¢–ã€‚' },
            deneb: { name: 'Deneb', icon: 'ğŸ‘¦ğŸ»', title: 'å¿ è¯šçš„è¿½éšè€…', story: 'ç»´åŠ çš„å¼Ÿå¼Ÿã€‚ä»–å¯¹å§å§æ€€æœ‰ç»å¯¹çš„ä¿¡ä»»ï¼Œæ˜¯ç»´åŠ åŠ›é‡çš„é‡è¦æ¥æºã€‚ä»–åœ¨æ—…é€”ä¸­ä»ä¸€ä¸ªéœ€è¦è¢«ä¿æŠ¤çš„å­©å­ï¼Œæˆé•¿ä¸ºä¸€ä¸ªå‹‡æ•¢çš„å°‘å¹´ã€‚' },
            aquila: { name: 'Aquila', icon: 'ğŸ‘©ğŸ»', title: 'åšå¼ºçš„æ¯äº²', story: 'ç»´åŠ çš„è¡¨å§ã€‚å¥¹ä»ä¸€ä¸ªå¤„å¤„è¡¨ç°ä¼˜è¶Šçš„â€œæ¨¡èŒƒç”Ÿâ€ï¼Œåœ¨ç¾éš¾å’Œé¥¥é¥¿çš„æ‰“å‡»ä¸‹ï¼Œèœ•å˜ä¸ºä¸€ä¸ªä¸ºäº†å­©å­å¯ä»¥æ”¾å¼ƒä¸€åˆ‡çš„æ¯äº²ã€‚' },
            capella: { name: 'Capella', icon: 'ğŸ–¤', title: 'é™¨è½çš„å¸Œæœ›', isLost: true, story: 'ç»´åŠ æœªæ›¾è°‹é¢çš„å¦¹å¦¹ï¼Œå‡ºç”Ÿå³å¤­æŠ˜ã€‚å¥¹çš„æ­»äº¡æ˜¯ç»´åŠ ç¦»å®¶å’Œæœ€ç»ˆæˆé•¿çš„ç›´æ¥åŸå› ã€‚' },
            altair: { name: 'Altair', icon: 'ğŸ‘¦ğŸ»', title: 'å¤©çœŸçš„å¹¼é²¸', story: 'é˜¿å¥æ‹‰çš„å¹¼å­ï¼Œä»£è¡¨äº†é²¸ç¾¤çš„æœªæ¥ä¸å¸Œæœ›ã€‚åœ¨è‰°éš¾çš„æ—…é€”ä¸­ï¼Œä»–çš„å­˜åœ¨æ˜¯å¤§å®¶ç»§ç»­å‰è¡Œçš„åŠ¨åŠ›ä¹‹ä¸€ã€‚' },
            io: { name: 'Io (Ancestor)', icon: 'ğŸ“œ', title: 'å…ˆç¥–', story: 'â€œæš–æ°´é£Ÿé²‘ç¤¾ç¾¤â€çš„ä¸€ä½ç¥–å…ˆï¼Œåœ¨â€œå¤§é›†ä¼šâ€æ—¶è¢«æåŠï¼Œæ˜¯ Ganymede çš„æ›¾ç¥–æ¯ã€‚' },
            europa: { name: 'Europa', icon: 'ğŸ‘©ğŸ»', title: 'åŒæ—æˆå‘˜', story: 'Io çš„åä»£ï¼ŒGanymede çš„æ¯äº²ï¼Œå±äºåºå¤§çš„â€œæš–æ°´é£Ÿé²‘ç¤¾ç¾¤â€ã€‚' },
            ganymede: { name: 'Ganymede', icon: 'ğŸ‘§ğŸ»', title: 'åŒæ—æˆå‘˜', story: 'Europa çš„å¥³å„¿ï¼Œåœ¨â€œå¤§é›†ä¼šâ€æ—¶å‘å¤§å®¶å®£å‘Šè‡ªå·±çš„åå­—å’Œè¡€ç»Ÿã€‚' },
            titania: { name: 'Titania (Ancestor)', icon: 'ğŸ“œ', title: 'å…ˆç¥–', story: 'â€œæš–æ°´é£Ÿé²‘ç¤¾ç¾¤â€çš„å¦ä¸€ä½ç¥–å…ˆï¼Œæ˜¯ Mimas çš„æ›¾ç¥–æ¯ã€‚' },
            phoebe: { name: 'Phoebe', icon: 'ğŸ‘©ğŸ»', title: 'åŒæ—æˆå‘˜', story: 'Titania çš„å¥³å„¿ï¼ŒMimas çš„æ¯äº²ã€‚' },
            mimas: { name: 'Mimas', icon: 'ğŸ‘¦ğŸ»', title: 'åŒæ—æˆå‘˜', story: 'Phoebe çš„å„¿å­ï¼Œåœ¨â€œå¤§é›†ä¼šâ€æ—¶å®£å‘Šè‡ªå·±çš„åå­—ã€‚' }
        };

        function createNode(id) {
            const char = characterData[id];
            const node = document.createElement('div');
            node.className = 'node';
            node.dataset.id = id;
            if (char.isProtagonist) node.classList.add('is-vega');
            if (char.isLost) node.classList.add('is-lost');
            
            const iconSpan = document.createElement('span');
            iconSpan.className = 'node-icon';
            iconSpan.textContent = char.icon;

            const nameSpan = document.createElement('span');
            nameSpan.textContent = char.name;

            node.appendChild(iconSpan);
            node.appendChild(nameSpan);

            return node;
        }

        function createTreeHTML(structure) {
            const li = document.createElement('li');
            
            if (structure.label) {
                const label = document.createElement('span');
                label.className = 'relationship-label';
                label.textContent = structure.label;
                li.appendChild(label);
            }

            li.appendChild(createNode(structure.id));

            if (structure.children && structure.children.length > 0) {
                const ul = document.createElement('ul');
                structure.children.forEach(child => ul.appendChild(createTreeHTML(child)));
                li.appendChild(ul);
            }
            return li;
        }

        // --- ä¸»å®¶æ—ç»“æ„ ---
        const mainFamilyTreeStructure = {
            id: 'siria',
            children: [
                { id: 'arctura', label: 'å¥³å„¿', children: [
                    { id: 'vega', label: 'å¥³å„¿' },
                    { id: 'deneb', label: 'å„¿å­' },
                    { id: 'capella', label: 'å¥³å„¿' }
                ]},
                { id: 'nova', label: 'å¥³å„¿', children: [
                    { id: 'aquila', label: 'å¥³å„¿', children: [
                        { id: 'altair', label: 'å„¿å­' }
                    ]}
                ]},
                { id: 'andromeda', label: 'å¥³å„¿' },
                { id: 'rigel', label: 'å¼Ÿå¼Ÿ' },
                { id: 'antares', label: 'å¼Ÿå¼Ÿ' }
            ]
        };
        const mainTreeUl = document.createElement('ul');
        mainTreeUl.className = 'tree';
        mainTreeUl.appendChild(createTreeHTML(mainFamilyTreeStructure));
        document.getElementById('tree-container').appendChild(mainTreeUl);

        // --- å…¶ä»–æˆå‘˜ç»“æ„ ---
        const otherKinshipContainer = document.querySelector('#other-kinship-container .tree-wrapper');
        const ioTree = createTreeHTML({ id: 'io', children: [{ id: 'europa', label: 'åä»£', children: [{ id: 'ganymede', label: 'å¥³å„¿' }] }] });
        const titaniaTree = createTreeHTML({ id: 'titania', children: [{ id: 'phoebe', label: 'å¥³å„¿', children: [{ id: 'mimas', label: 'å„¿å­' }] }] });
        const ioTreeUl = document.createElement('ul');
        ioTreeUl.className = 'tree';
        ioTreeUl.appendChild(ioTree);
        const titaniaTreeUl = document.createElement('ul');
        titaniaTreeUl.className = 'tree ml-16';
        titaniaTreeUl.appendChild(titaniaTree);
        otherKinshipContainer.append(ioTreeUl, titaniaTreeUl);

        // --- Modal Logic ---
        const modal = document.getElementById('character-modal');
        const modalBody = document.getElementById('modal-body');
        const closeModalBtn = document.getElementById('close-modal');

        document.querySelectorAll('.node').forEach(node => {
            node.addEventListener('click', () => {
                const id = node.dataset.id;
                const char = characterData[id];
                modalBody.innerHTML = `
                    <div class="modal-icon">${char.icon}</div>
                    <div>
                        <h2 class="text-2xl font-bold ${char.isProtagonist ? 'text-cyan-400' : ''}">${char.name}</h2>
                        <p class="text-sm text-gray-400 mb-4">${char.title}</p>
                        <p>${char.story}</p>
                    </div>
                `;
                modal.style.display = 'flex';
            });
        });

        closeModalBtn.addEventListener('click', () => { modal.style.display = 'none'; });
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
    </script>
</body>
</html>

